import { useState, useEffect } from 'react'
import { Sun, Moon, List, X, Calendar, Clock, MapPin, Users, Sparkle, Code, TrendUp, CheckCircle } from '@phosphor-icons/react'
import { Button } from '@/components/ui/button'
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'
import { Badge } from '@/components/ui/badge'
import { Separator } from '@/components/ui/separator'

interface AgendaItem {
  segment: string
  title: string
  description?: string
  icon: React.ReactNode
}

interface Speaker {
  name: string
  role: string
  bio: string
  image: string
}

function App() {
  const [theme, setTheme] = useState<'light' | 'dark'>('light')
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false)
  const [activeSection, setActiveSection] = useState('about')

  useEffect(() => {
    const savedTheme = localStorage.getItem('theme') as 'light' | 'dark' | null
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches
    const initialTheme = savedTheme || (prefersDark ? 'dark' : 'light')
    setTheme(initialTheme)
    document.documentElement.classList.toggle('dark', initialTheme === 'dark')
  }, [])

  const toggleTheme = () => {
    const newTheme = theme === 'light' ? 'dark' : 'light'
    setTheme(newTheme)
    localStorage.setItem('theme', newTheme)
    document.documentElement.classList.toggle('dark', newTheme === 'dark')
  }

  useEffect(() => {
    const handleScroll = () => {
      const sections = ['about', 'agenda', 'highlights', 'location', 'speakers']
      const scrollPos = window.scrollY + 140

      for (const sectionId of sections) {
        const element = document.getElementById(sectionId)
        if (element) {
          const offsetTop = element.offsetTop
          const offsetBottom = offsetTop + element.offsetHeight
          if (scrollPos >= offsetTop && scrollPos < offsetBottom) {
            setActiveSection(sectionId)
            break
          }
        }
      }
    }

    window.addEventListener('scroll', handleScroll)
    handleScroll()
    return () => window.removeEventListener('scroll', handleScroll)
  }, [])

  const agendaItems: AgendaItem[] = [
    {
      segment: '1',
      title: 'Intro & Shaping the Future + AI in Action - Build your App',
      description: "Dive into GitHub Copilot's Agentic features with a live introduction and showcase, followed by hands-on workshop of Agentic and AI capabilities driving innovation and productivity by creating an App with Copilot.",
      icon: <Sparkle weight="duotone" className="text-primary" />
    },
    {
      segment: '2',
      title: 'Presentation',
      description: 'Presentation of App Ideas from Workshop and Closing Note',
      icon: <TrendUp weight="duotone" className="text-primary" />
    }
  ]

  const speakers: Speaker[] = [
    {
      name: 'Matthias Augustin',
      role: 'Technology Advisor & Cloud Adventurer',
      bio: 'Meet Matthias—a digital builder who loves turning messy ideas into clean, scalable systems. With years in product, tech, and customer experience, he\'s the guy who keeps teams aligned while pushing prototypes into something real. At our hackathon, he will help you to turn "cool concept" into "working solution."',
      image: 'https://media.licdn.com/dms/image/v2/D4E03AQFzHJTQQEoEkA/profile-displayphoto-shrink_800_800/profile-displayphoto-shrink_800_800/0/1700149788092?e=1747267200&v=beta&t=8VQmYqJxZqKxXoGqVBqKqVBqKxXoGqVBqKxXoGqVBqKxXoGqVBqKxXoGqVBqKxXoGqVBqKxXo'
    },
    {
      name: 'Kay Schneutzer',
      role: 'Presales Consultant & DATA & AI Guru',
      bio: 'Say hello to Kay—a strategy-meets-data powerhouse who spots value where others see noise. With global experience in AI, Data Analytics, and Innovation, he is all about making smart ideas commercially meaningful. Kay will show us how Github Copilot accelerates this.',
      image: 'https://i.imgur.com/placeholder-kay.jpg'
    },
    {
      name: 'Gesa-Kristin Gandetzky',
      role: 'Github Account Manager & Adoption Navigator',
      bio: 'Meet Gesa—a GitHub Account Manager who thrives on bringing the right people, ideas, and resources together. She\'s the friendly bridge between teams, mentors, and GitHub experts, making sure every project gets exactly what it needs to move forward. At our hackathon, she\'s your go-to guide for unblocking challenges, finding the perfect support, and keeping the energy high while everyone builds something amazing.',
      image: 'https://media.licdn.com/dms/image/v2/D4E03AQGqO6-6YxVKKQ/profile-displayphoto-shrink_800_800/profile-displayphoto-shrink_800_800/0/1705063858717?e=1747267200&v=beta&t=VxOGLrJ3k8HFP_jWZJQoK5YQpKxXoGqVBqKxXoGqVBqKxXoGqVBqKxXoGqVBqKxXoGqVBqKxXo'
    }
  ]

  const demoHighlights = [
    { title: 'Agent Mode with Vision', description: 'Implementing complex UI features through natural language prompts' },
    { title: 'MCP Server Integration', description: 'Extended capabilities for enhanced development workflows' },
    { title: 'Automated Testing', description: 'Coverage analysis and quality assurance automation' },
    { title: 'Security Scanning', description: 'AI-powered fixes and automated security improvements' },
    { title: 'Hands-On Hackathon', description: 'Build your own app individually or in teams, then present your results' }
  ]

  const navItems = [
    { id: 'about', label: 'About' },
    { id: 'agenda', label: 'Agenda' },
    { id: 'highlights', label: 'Highlights' },
    { id: 'location', label: 'Location' },
    { id: 'speakers', label: 'Speakers' }
  ]

  const scrollToSection = (sectionId: string) => {
    const element = document.getElementById(sectionId)
    if (element) {
      const offset = 80
      const elementPosition = element.getBoundingClientRect().top
      const offsetPosition = elementPosition + window.pageYOffset - offset

      window.scrollTo({
        top: offsetPosition,
        behavior: 'smooth'
      })
    }
    setMobileMenuOpen(false)
  }

  return (
    <div className="min-h-screen bg-background text-foreground transition-colors duration-400">
      <nav className="sticky top-0 z-50 bg-background/85 backdrop-blur-lg border-b border-border">
        <div className="max-w-6xl mx-auto px-4 md:px-6">
          <div className="flex items-center justify-between h-16 md:h-20">
            <button
              onClick={() => scrollToSection('about')}
              className="flex items-center gap-3 font-bold text-base md:text-lg tracking-tight hover:opacity-80 transition-opacity"
            >
              <img
                src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png"
                alt="GitHub Logo"
                className="w-8 h-8 md:w-9 md:h-9 dark:invert"
              />
              <span className="hidden sm:inline">Copilot Hackathon</span>
              <span className="sm:hidden">Hackathon</span>
            </button>

            <div className="hidden lg:flex items-center gap-8">
              {navItems.map((item) => (
                <button
                  key={item.id}
                  onClick={() => scrollToSection(item.id)}
                  className={`text-sm font-medium transition-colors hover:text-primary ${
                    activeSection === item.id ? 'text-primary font-semibold' : 'text-foreground'
                  }`}
                >
                  {item.label}
                </button>
              ))}
              <a
                href="https://docs.google.com/forms/d/e/1FAIpQLSc62aHHMLmvRDQidvsnCijBuIv95qe33EP8oGGZC14zplFrZw/viewform?usp=dialog"
                target="_blank"
                rel="noopener noreferrer"
              >
                <Button size="sm" className="bg-primary hover:bg-primary/90 text-primary-foreground font-semibold rounded-full shadow-lg">
                  Register
                </Button>
              </a>
            </div>

            <div className="flex items-center gap-2">
              <Button
                variant="ghost"
                size="icon"
                onClick={toggleTheme}
                className="rounded-full"
                aria-label="Toggle theme"
              >
                {theme === 'light' ? (
                  <Moon weight="duotone" className="h-5 w-5" />
                ) : (
                  <Sun weight="duotone" className="h-5 w-5" />
                )}
              </Button>

              <Button
                variant="ghost"
                size="icon"
                onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
                className="lg:hidden rounded-full"
                aria-label="Toggle menu"
              >
                {mobileMenuOpen ? (
                  <X className="h-6 w-6" />
                ) : (
                  <List className="h-6 w-6" />
                )}
              </Button>
            </div>
          </div>

          {mobileMenuOpen && (
            <div className="lg:hidden pb-4 space-y-2 animate-in slide-in-from-top">
              {navItems.map((item) => (
                <button
                  key={item.id}
                  onClick={() => scrollToSection(item.id)}
                  className={`block w-full text-left px-4 py-2 rounded-lg transition-colors ${
                    activeSection === item.id
                      ? 'bg-primary/10 text-primary font-semibold'
                      : 'hover:bg-muted'
                  }`}
                >
                  {item.label}
                </button>
              ))}
              <a
                href="https://docs.google.com/forms/d/e/1FAIpQLSc62aHHMLmvRDQidvsnCijBuIv95qe33EP8oGGZC14zplFrZw/viewform?usp=dialog"
                target="_blank"
                rel="noopener noreferrer"
                className="block pt-2"
              >
                <Button className="w-full bg-primary hover:bg-primary/90 text-primary-foreground font-semibold">
                  Register Now
                </Button>
              </a>
            </div>
          )}
        </div>
      </nav>

      <section id="about" className="relative overflow-hidden">
        <div className="absolute inset-0 bg-gradient-to-b from-primary/5 via-accent/5 to-background pointer-events-none" />
        <div className="relative max-w-6xl mx-auto px-4 md:px-6 py-12 md:py-20">
          <div className="grid lg:grid-cols-[1fr_420px] gap-8 md:gap-12 items-start">
            <div className="space-y-6">
              <h1 className="text-4xl md:text-5xl lg:text-6xl font-extrabold tracking-tight leading-tight">
                GitHub Copilot Hackathon – SoftwareONE
              </h1>
              <p className="text-lg md:text-xl text-muted-foreground font-medium leading-relaxed max-w-3xl">
                Join us for a focused, hands-on exploration of AI-powered developer productivity.
                Discover how GitHub Copilot and the GitHub platform accelerate innovation, improve quality,
                and transform the way engineering teams build and deliver software.
              </p>
              <a
                href="https://docs.google.com/forms/d/e/1FAIpQLSc62aHHMLmvRDQidvsnCijBuIv95qe33EP8oGGZC14zplFrZw/viewform?usp=dialog"
                target="_blank"
                rel="noopener noreferrer"
              >
                <Button
                  size="lg"
                  className="bg-gradient-to-r from-primary to-accent hover:opacity-90 text-white font-semibold shadow-xl hover:shadow-2xl transition-all hover:scale-105 rounded-xl"
                >
                  Register Now
                </Button>
              </a>
            </div>

            <Card className="shadow-xl">
              <CardContent className="p-6 space-y-4">
                <div className="flex items-start gap-3">
                  <Calendar weight="duotone" className="w-6 h-6 text-primary mt-1 flex-shrink-0" />
                  <div>
                    <p className="text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-1">Date</p>
                    <p className="font-semibold">December 15, 2025</p>
                  </div>
                </div>
                <Separator />
                <div className="flex items-start gap-3">
                  <Clock weight="duotone" className="w-6 h-6 text-primary mt-1 flex-shrink-0" />
                  <div>
                    <p className="text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-1">Time</p>
                    <p className="font-semibold">9:00 AM – 5:00 PM</p>
                  </div>
                </div>
                <Separator />
                <div className="flex items-start gap-3">
                  <MapPin weight="duotone" className="w-6 h-6 text-primary mt-1 flex-shrink-0" />
                  <div>
                    <p className="text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-1">Venue</p>
                    <p className="font-semibold">Microsoft Vienna, Am Europlatz 3<br />1120 Vienna, Austria</p>
                  </div>
                </div>
                <Separator />
                <div className="flex items-start gap-3">
                  <Users weight="duotone" className="w-6 h-6 text-primary mt-1 flex-shrink-0" />
                  <div>
                    <p className="text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-1">Format</p>
                    <p className="font-semibold">Workshop, Hands-On Activity & Presentation</p>
                  </div>
                </div>
              </CardContent>
            </Card>
          </div>

          <Card className="mt-12 shadow-lg">
            <CardHeader>
              <CardTitle className="text-2xl md:text-3xl">Event Flow</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="grid md:grid-cols-2 gap-6">
                <div>
                  <ul className="space-y-2 text-sm md:text-base font-medium">
                    <li><strong>Doors Open:</strong> 9:00 AM</li>
                    <li><strong>Event Start:</strong> 9:30 AM</li>
                    <li><strong>Sessions:</strong> 9:30 AM – 5:00 PM</li>
                  </ul>
                </div>
                <div className="text-sm md:text-base text-muted-foreground leading-relaxed font-medium">
                  A comprehensive demonstration of GitHub Copilot's advanced AI capabilities using the OctoCat Supply web application.
                  This demo showcases Copilot Agent Mode with Vision for implementing complex UI features, MCP server integration for extended capabilities,
                  automated testing with coverage analysis, security scanning with AI-powered fixes, and DevOps automation—all through natural language prompts.
                </div>
              </div>
            </CardContent>
          </Card>
        </div>
      </section>

      <section id="agenda" className="max-w-6xl mx-auto px-4 md:px-6 py-12 md:py-16">
        <h2 className="text-3xl md:text-4xl font-extrabold tracking-tight mb-8">Agenda</h2>
        <div className="grid sm:grid-cols-2 gap-4">
          {agendaItems.map((item, index) => (
            <Card key={index} className="relative overflow-hidden group hover:shadow-lg transition-shadow">
              <div className="absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity" />
              <CardContent className="p-5 relative">
                <div className="flex items-start gap-3 mb-3">
                  <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-muted to-muted/50 flex items-center justify-center flex-shrink-0 shadow-sm">
                    {item.icon}
                  </div>
                </div>
                <h3 className="font-bold text-base mb-1 leading-tight">
                  {item.title}
                </h3>
                {item.description && (
                  <p className="text-xs text-muted-foreground leading-relaxed">{item.description}</p>
                )}
              </CardContent>
            </Card>
          ))}
        </div>
      </section>

      <section id="highlights" className="max-w-6xl mx-auto px-4 md:px-6 py-12 md:py-16">
        <Card className="shadow-lg">
          <CardHeader>
            <CardTitle className="text-2xl md:text-3xl">Hackathon Highlights</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="space-y-3">
              {demoHighlights.map((item, index) => (
                <div
                  key={index}
                  className="flex items-start gap-4 bg-muted/30 rounded-xl p-4 hover:bg-muted/50 transition-colors"
                >
                  <div className="w-7 h-7 rounded-full bg-success flex items-center justify-center flex-shrink-0 shadow-sm">
                    <CheckCircle weight="fill" className="w-5 h-5 text-success-foreground" />
                  </div>
                  <div className="flex-1 text-sm md:text-base">
                    <span className="font-semibold">{item.title}:</span>{' '}
                    <span className="text-muted-foreground">{item.description}</span>
                  </div>
                </div>
              ))}
            </div>
          </CardContent>
        </Card>
      </section>

      <section id="location" className="max-w-6xl mx-auto px-4 md:px-6 py-12 md:py-16">
        <div className="grid lg:grid-cols-2 gap-8 items-start">
          <div className="space-y-4">
            <h2 className="text-3xl md:text-4xl font-extrabold tracking-tight">Location</h2>
            <div>
              <p className="text-lg font-semibold mb-2">Microsoft Vienna</p>
              <p className="text-base text-muted-foreground font-medium italic leading-relaxed">
                Am Europlatz 3, 1120 Vienna, Austria
              </p>
              <p className="text-sm text-muted-foreground mt-4 font-medium">
                Arrive early to grab a coffee and connect before we begin.
              </p>
            </div>
          </div>
          <div className="rounded-2xl overflow-hidden shadow-xl bg-card h-[300px] md:h-[420px]">
            <iframe
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1695.529419666575!2d16.33197421730079!3d48.17217639365838!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x476da8414fa1f10b%3A0x66bbfae0c27b34a!2sMicrosoft%20%C3%96sterreich!5e0!3m2!1sde!2snl!4v1763566243831!5m2!1sde!2snl"
              width="100%"
              height="100%"
              style={{ border: 0 }}
              allowFullScreen
              loading="lazy"
              referrerPolicy="no-referrer-when-downgrade"
              title="Microsoft Vienna Location"
            />
          </div>
        </div>
      </section>

      <section id="speakers" className="max-w-6xl mx-auto px-4 md:px-6 py-12 md:py-16 pb-20">
        <h2 className="text-3xl md:text-4xl font-extrabold tracking-tight mb-8">Speakers</h2>
        <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
          {speakers.map((speaker, index) => (
            <Card key={index} className="relative overflow-hidden shadow-lg hover:shadow-xl transition-shadow">
              <div className="absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-accent/5 pointer-events-none" />
              <CardContent className="p-6 md:p-8 text-center relative">
                <div className="w-24 h-24 md:w-32 md:h-32 mx-auto mb-4 rounded-full overflow-hidden border-4 border-background shadow-lg bg-muted">
                  <img
                    src={speaker.image}
                    alt={speaker.name}
                    className="w-full h-full object-cover"
                  />
                </div>
                <h3 className="text-lg md:text-xl font-bold mb-2 tracking-tight">{speaker.name}</h3>
                <Badge className="mb-4 bg-primary/10 text-primary hover:bg-primary/20 text-xs font-semibold uppercase tracking-wide">
                  {speaker.role}
                </Badge>
                <p className="text-xs md:text-sm text-muted-foreground leading-relaxed text-left font-medium">
                  {speaker.bio}
                </p>
              </CardContent>
            </Card>
          ))}
        </div>
      </section>

      <footer className="text-center py-12 md:py-16 text-xs md:text-sm text-muted-foreground border-t border-border">
        <p>© 2025 GitHub Copilot Hackathon – SoftwareONE. All rights reserved.</p>
      </footer>
    </div>
  )
}

export default App

